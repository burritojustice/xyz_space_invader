import:
    - https://tangrams.github.io/blocks/patterns/stripes.yaml
    - https://tangrams.github.io/blocks/space/screen.yaml
    
scene:
    background:
        color: white

sources:
    # _xyzspace: # this source is created at run-time based on XYZ space
    mapzen: #xyz-osm
        type: MVT
        url: https://xyz.api.here.com/tiles/osmbase/512/all/{z}/{x}/{y}.mvt
        url_params:
            access_token: global.access_token
        max_zoom: 2
    _xyzspace:
        max_zoom: 1

styles:
    pallete:
        shaders:
            blocks: 
                global: |
                    // Common Values 
                    //================================
                    float radio = 0.05;
                    vec2 size = vec2(1.,.6);
                    vec3 background = vec3(1.);
                    vec3 midle = vec3(0.824, 0.812, 0.804);
                    vec3 foreground = vec3(0.275,0.298,0.251);
    waves:
        base: polygons
        mix: [space-screen, pallete, patterns-stripes, projection]
        shaders: 
            blocks: 
                color: |
                    vec2 pos = getScreenNonStretchCoords();
                    pos.y += sin(pos.x*30.)*.01;
                    color.rgb = mix(color.rgb,background,stripes(pos*200.,.4));

layers:
    _xyz_dots:
        draw:
            points:
                style: _points
        donut_points:
            draw:
                points:
                    style: _points

    _xyz_lines:
        draw:
            overlay_lines:
                style: _lines_overlay
            text:
                style: _text

    _xyz_polygons:
        _outlines:
            draw:
                overlay_lines:
                    style: _lines
        draw:
            inlay_polygons:
                style: _polygons_inlay
            text:
                style: _text

    boundaries:
        # enabled: false
        data: { source: mapzen }
        draw:
            lines:
                style: _lines
    earth:
        data: { source: mapzen }
        draw:
            polygons:
                style: _polygons
                order: 9
                color: white
    water:
        data: { source: mapzen }
        draw:
            waves:
                order: 8
                color: [0.824, 0.812, 0.804]
        lakes:
            filter: { kind: [lake, riverbank, dock, water, basin, reservoir, playa, canal, dam, ditch, drain, river, stream]}
            draw:
                lines:
                    style: _lines
                    order: 1 # global.order hides this for some reason
                    color: black
                    cap: round
                    width: .5px
    places:
        data: { source: mapzen }
        draw:
            text:
                style: _text
                buffer: 8px
                font:
                    fill: black
                    stroke: { color: white , width: 5 }
